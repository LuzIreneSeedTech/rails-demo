var n="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var e={};e=Pend;function Pend(){(this||n).pending=0;(this||n).max=Infinity;(this||n).listeners=[];(this||n).waiting=[];(this||n).error=null}Pend.prototype.go=function(e){(this||n).pending<(this||n).max?pendGo(this||n,e):(this||n).waiting.push(e)};Pend.prototype.wait=function(e){0===(this||n).pending?e((this||n).error):(this||n).listeners.push(e)};Pend.prototype.hold=function(){return pendHold(this||n)};function pendHold(n){n.pending+=1;var e=false;return onCb;function onCb(i){if(e)throw new Error("callback called twice");e=true;n.error=n.error||i;n.pending-=1;if(n.waiting.length>0&&n.pending<n.max)pendGo(n,n.waiting.shift());else if(0===n.pending){var t=n.listeners;n.listeners=[];t.forEach(cbListener)}}function cbListener(e){e(n.error)}}function pendGo(n,e){e(pendHold(n))}var i=e;export default i;

